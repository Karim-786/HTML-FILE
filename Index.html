<!DOCTYPE html>
<html>
<head>
  <style>
    .available { color: green; }
    .unavailable { color: red; }
    .disabled { 
      pointer-events: none;
      opacity: 0.5; 
      cursor: not-allowed; 
    }
  </style>
</head>
<body>

  <div id="slotMessage"></div>
  <a id="formLink" href="https://forms.gle/kAzbFNtFQz5VpJE16" target="_blank" class="disabled">Open Form</a>

  <script>
    let formStatus = 'unavailable'; 

    function checkFormStatus() {
      const scriptUrl = 'https://script.google.com/macros/s/AKfycbwNFMqL61iNgL3RGVum9UT6S_NzoGCFDVPTnCVKmR4qYqRXMqHNlTsw7XYaYVqoMill-g/exec';
  
      fetch(scriptUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          const slotMessage = document.getElementById('slotMessage');
          const formLink = document.getElementById('formLink');
  
          if (data.status === 'available') {
            slotMessage.textContent = 'Slots Available';
            slotMessage.classList.remove('unavailable');
            slotMessage.classList.add('available');
            formStatus = 'available'; 

            formLink.classList.remove('disabled');
            formLink.style.pointerEvents = 'auto';
            formLink.style.opacity = '1';        
            formLink.style.cursor = 'pointer';    
          } else {
            slotMessage.textContent = 'Slots Unavailable';
            slotMessage.classList.remove('available');
            slotMessage.classList.add('unavailable');
            formStatus = 'unavailable'; 

            formLink.classList.add('disabled');
            formLink.style.pointerEvents = 'none';  
            formLink.style.opacity = '0.5';     
            formLink.style.cursor = 'not-allowed';  
          }
        })
        .catch(error => {
          console.error('Error fetching form status:', error);
          const slotMessage = document.getElementById('slotMessage');
          slotMessage.textContent = 'Error fetching form status. Please try again later.';
          slotMessage.classList.add('unavailable');
        });
    }
    window.onload = checkFormStatus;
  </script>

</body>
</html>
